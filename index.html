<!DOCTYPE html>
<html lang="ka">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ქართული ჰემატრიის კალკულატორი</title>
    <style>
        @font-face {
    font-family: 'Untitled1';
    src: url('Untitled1.woff2') format('woff2'),
        url('Untitled1.woff') format('woff');
    font-weight: normal;
    font-style: normal;
    font-display: swap;
}


        body {
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg, #121212, #1f1f1f);
    color: #ffffff;
    margin: 0;
    padding: 0;
}

.test-mode-banner {
    background: #ffcc00;
    color: #121212;
    text-align: center;
    padding: 10px;
    font-weight: bold;
}

header {
    background: #1a1a1a;
    padding: 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
}

.logo {
    font-size: 26px;
    font-weight: bold;
    color: #4a90e2;
}

.header-image {
    max-width: 100px;
    height: auto;
    border-radius: 8px;
}

.header-text {
    font-size: 16px;
    color: #ff4d4d;
    text-align: center;
    flex-grow: 1;
    padding: 0 20px;
}

.nav-container {
    background: #2a2a2a;
    padding: 10px 0;
}

.nav-menu {
    max-width: 1200px;
    margin: 0 auto;
    display: flex;
    list-style: none;
    justify-content: center;
}

.nav-menu a {
    color: #ffffff;
    text-decoration: none;
    padding: 15px 25px;
    display: block;
    font-size: 16px;
}

.nav-menu a:hover, .nav-menu a.active {
    background: #4a90e2;
    border-radius: 5px;
}

.dropdown-content {
    display: none;
    position: absolute;
    background: #2a2a2a;
    min-width: 180px;
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
}

.dropdown:hover .dropdown-content {
    display: block;
}

.dropdown-content a {
    padding: 12px 20px;
}

.container {
    max-width: 1200px;
    margin: 30px auto;
    padding: 0 20px;
    text-align: center;
}

.title h2 {
    color: #4a90e2;
    font-size: 28px;
    text-transform: uppercase;
}

.input-area {
    margin-bottom: 30px;
}

#word-input {
    width: 90%;
    max-width: 450px;
    padding: 12px;
    font-size: 18px;
    background: #2a2a2a;
    color: #ffffff;
    border: 1px solid #444;
    border-radius: 8px;
}

.action-buttons {
    margin: 20px 0;
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
}

.action-btn {
    background: linear-gradient(135deg, #4a90e2, #357abd);
    color: #ffffff;
    border: none;
    border-radius: 8px;
    padding: 12px 20px;
    margin: 0 10px 10px;
    cursor: pointer;
    font-size: 16px;
}

.action-btn:hover {
    background: linear-gradient(135deg, #3a7bc8, #2a639e);
}

.results-box {
    background: #1a1a1a;
    border: 1px solid #333;
    border-radius: 12px;
    padding: 25px;
    margin-bottom: 30px;
    width: 90%;
    max-width: 600px;
    display: inline-block;
}

.results-grid {
    display: grid;
    grid-template-columns: repeat(6, 1fr);
    gap: 15px;
}

.result-label {
    font-size: 14px;
    color: #aaaaaa;
}

.value {
    font-size: 36px;
    font-weight: bold;
}

.ordinal-value { color: #4dff4d; }
.reduction-value { color: #4a90e2; }
.reverse-value { color: #4dff4d; }
.reverse-reduction-value { color: #00cccc; }
.hidden-value { color: #ff9900; }
.hidden-reduction-value { color: #ff6600; }

.word-breakdown {
    margin: 20px auto;
    max-width: 600px;
}

.breakdown-word {
    letter-spacing: 12px;
    font-size: 20px;
}

.breakdown-numbers {
    letter-spacing: 12px;
    font-size: 18px;
    color: #4dff4d;
}

.calculation-details {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 25px;
    max-width: 900px;
    margin: 0 auto 30px;
}

.calculation-column {
    background: #1a1a1a;
    border: 1px solid #333;
    border-radius: 12px;
    padding: 20px;
}

.calculation-title {
    font-size: 18px;
    color: #4dff4d;
    text-transform: uppercase;
}

.calculation-subtitle {
    font-size: 16px;
    color: #4a90e2;
}

.calculation-value {
    font-size: 28px;
    font-weight: bold;
}

.anagram-section, .crypto-section {
    margin: 30px auto;
    padding: 25px;
    background: #1a1a1a;
    border: 1px solid #333;
    border-radius: 12px;
    max-width: 900px;
}

.anagram-title {
    font-size: 22px;
    color: #4a90e2;
    text-transform: uppercase;
    margin-bottom: 20px;
}

.anagram-loader {
    display: none;
    margin: 20px auto;
    border: 4px solid #1a1a1a;
    border-top: 4px solid #4a90e2;
    border-radius: 50%;
    width: 35px;
    height: 35px;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

.anagram-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
}

.anagram-table th, .anagram-table td {
    border: 1px solid #444;
    padding: 12px;
    font-size: 16px;
    background: #252525;
}

.anagram-table th {
    background: #333;
    color: #4a90e2;
}

.anagram-message {
    margin: 20px 0;
    font-style: italic;
    color: #aaaaaa;
}

.alphabet-section {
    margin-top: 40px;
}

.alphabet-title {
    font-size: 22px;
    color: #4a90e2;
    text-transform: uppercase;
}

.alphabet-container {
    background: #1a1a1a;
    border: 1px solid #333;
    border-radius: 12px;
    padding: 25px;
    max-width: 900px;
    margin: 0 auto;
}

.alphabet-grid {
    display: grid;
    grid-template-columns: repeat(12, 1fr);
    gap: 12px;
}

.letter-box {
    padding: 10px;
    background: #2a2a2a;
    border: 1px solid #444;
    border-radius: 8px;
}

.letter-ordinal { font-size: 12px; color: #4dff4d; }
.letter { font-size: 20px; }
.letter-value { font-size: 12px; color: #888; }

footer {
    background: linear-gradient(135deg, #1a1a1a, #252525);
    padding: 30px 0;
    text-align: center;
    margin-top: 40px;
}

.footer-text {
    font-size: 16px;
    color: #aaaaaa;
}

.footer-contact {
    display: flex;
    justify-content: center;
    gap: 40px;
}

.contact-item {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 16px;
    color: #ffffff;
}

.contact-icon {
    width: 20px;
    height: 20px;
    fill: #4a90e2;
}

@media (max-width: 1024px) {
    .results-grid { grid-template-columns: repeat(3, 1fr); }
    .calculation-details { grid-template-columns: repeat(2, 1fr); }
    .alphabet-grid { grid-template-columns: repeat(6, 1fr); }
}

@media (max-width: 768px) {
    header { flex-direction: column; }
    .nav-menu { flex-direction: column; }
    .results-grid { grid-template-columns: 1fr 1fr; }
    .calculation-details { grid-template-columns: 1fr; }
    .action-buttons { flex-direction: column; }
    .action-btn { width: 80%; margin: 5px auto; }
}
    </style>
</head>
<body>
    <div class="test-mode-banner">საიტი მუშაობს სატესტო რეჟიმში</div>

    <header>
       <div class="logo">✠ ქართული ჰემატრია</div>
        <div class="header-text">✠"დამარხულ არც ენაი ქართული დღედმდე მეორედ მოსვლისა მესიისა საწამებლად..."✠</div>
        <img src="https://bolnisi.gov.ge/files/uploads/Flag_of_Bolnisi_Municipality.svg.png" alt="Orthodox Symbol" class="header-image">
    </header>

    <div class="nav-container">
        <ul class="nav-menu">
            <li><a href="#" class="active">კალკულატორი</a></li>
            <li class="dropdown">
                <a href="#" class="dropbtn">ხელსაწყოები</a>
                <div class="dropdown-content">
                    <a href="#">რიცხვითი თვისებები</a>
                    <a href="#">ტექსტის სიხშირული ანალიზი</a>
                </div>
            </li>
        </ul>
    </div>

    <div class="container">
        <div class="title">
            <h2>ქართული ჰემატრიის კალკულატორი</h2>
        </div>

        <div class="input-area">
            <input type="text" id="word-input" placeholder="შეიყვანეთ სიტყვა...">
            <div class="action-buttons">
                <button id="find-anagrams-btn" class="action-btn">ანაგრამების ძიება</button>
                <button id="crypto-analysis-btn" class="action-btn">კრიპტოგრაფიული ანალიზი</button>
                <button id="clear-btn" class="action-btn">გასუფთავება</button>
            </div>
        </div>

        <div class="results-box">
            <div class="results-grid">
                <div>
                    <div class="result-label">რიგითი მნიშვნელობების ჯამი</div>
                    <p id="ordinal-value" class="value ordinal-value">0</p>
                </div>
                <div>
                    <div class="result-label">1 ციფრამდე დაყვანა</div>
                    <p id="reduction-value" class="value reduction-value">0</p>
                </div>
                <div>
                    <div class="result-label">რიცხვითი მნიშვნელობების ჯამი</div>
                    <p id="reverse-value" class="value reverse-value">0</p>
                </div>
                <div>
                    <div class="result-label">1 ციფრამდე დაყვანა</div>
                    <p id="reverse-reduction-value" class="value reverse-reduction-value">0</p>
                </div>
                <div>
                    <div class="result-label">ფარული ჰემატრია</div>
                    <p id="hidden-value" class="value hidden-value">0</p>
                </div>
                <div>
                    <div class="result-label">1 ციფრამდე დაყვანა</div>
                    <p id="hidden-reduction-value" class="value hidden-reduction-value">0</p>
                </div>
            </div>
        </div>

        <div class="word-breakdown" id="word-breakdown">
            <p id="input-word" class="breakdown-word"></p>
            <p id="ordinal-breakdown" class="breakdown-numbers"></p>
        </div>

        <div class="calculation-details">
            <div class="calculation-column">
                <div class="calculation-title">რიგითი ჯამი</div>
                <div id="ordinal-calculation" class="calculation-value">0</div>
                <div class="calculation-subtitle">1 ციფრამდე დაყვანა</div>
                <div id="ordinal-reduction" class="calculation-value">0</div>
            </div>
            <div class="calculation-column">
                <div class="calculation-title">რიცხვითი ჯამი</div>
                <div id="numeric-calculation" class="calculation-value">0</div>
                <div class="calculation-subtitle">1 ციფრამდე დაყვანა</div>
                <div id="numeric-reduction" class="calculation-value">0</div>
            </div>
            <div class="calculation-column">
                <div class="calculation-title">ფარული ჰემატრია</div>
                <div id="hidden-calculation" class="calculation-value">0</div>
                <div class="calculation-subtitle">1 ციფრამდე დაყვანა</div>
                <div id="hidden-reduction" class="calculation-value hidden-value">0</div>
            </div>
        </div>

        <div class="anagram-section" id="anagram-section" style="display: none;">
            <div class="anagram-title">ანაგრამები</div>
            <div id="anagram-loader" class="anagram-loader"></div>
            <div id="anagram-message" class="anagram-message"></div>
            <table id="anagram-table" class="anagram-table" style="display: none;">
                <thead>
                    <tr>
                        <th>ანაგრამა</th>
                    </tr>
                </thead>
                <tbody id="anagram-results"></tbody>
            </table>
        </div>

        <div class="crypto-section" id="crypto-section" style="display: none;">
            <div class="anagram-title">კრიპტოგრაფიული ანალიზი</div>
            <div id="crypto-loader" class="anagram-loader"></div>
            <div id="crypto-result" class="anagram-message"></div>
        </div>

        <div class="alphabet-section">
            <div class="alphabet-title">ქართული ანბანი</div>
            <div class="alphabet-container">
                <div class="alphabet-grid" id="alphabet-grid"></div>
            </div>
        </div>
    </div>

    <footer>
        <div class="footer-content">
            <p class="footer-text">© 2025 ქართული ჰემატრიის კალკულატორი</p>
            <div class="footer-contact">
                <div class="contact-item">
                    <svg class="contact-icon" viewBox="0 0 24 24">
                        <path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 2l-8 5-8-5V6l8 5 8-5z"/>
                    </svg>
                    <span>info@nextgen.ge</span>
                </div>
                <div class="contact-item">
                    <svg class="contact-icon" viewBox="0 0 24 24">
                        <path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.24 1.02l-2.2 2.2z"/>
                    </svg>
                    <span>+995 599 09 82 79</span>
                </div>
            </div>
        </div>
    </footer>

    <script>
       // გლობალური ცვლადები
// გლობალური ცვლადები
// გლობალური ცვლადები
// გლობალური ცვლადები
let wordListCache = null;

const georgianAlphabet = [
    { letter: 'ა', ordinal: 1, value: 1 },
    { letter: 'ბ', ordinal: 2, value: 2 },
    { letter: 'გ', ordinal: 3, value: 3 },
    { letter: 'დ', ordinal: 4, value: 4 },
    { letter: 'ე', ordinal: 5, value: 5 },
    { letter: 'ვ', ordinal: 6, value: 6 },
    { letter: 'ზ', ordinal: 7, value: 7 },
    { letter: 'ჱ(Ⴡ)', ordinal: 8, value: 8 },
    { letter: 'თ', ordinal: 9, value: 9 },
    { letter: 'ი', ordinal: 10, value: 10 },
    { letter: 'კ', ordinal: 11, value: 20 },
    { letter: 'ლ', ordinal: 12, value: 30 },
    { letter: 'მ', ordinal: 13, value: 40 },
    { letter: 'ნ', ordinal: 14, value: 50 },
    { letter: 'ჲ', ordinal: 15, value: 60 },
    { letter: 'ო', ordinal: 16, value: 70 },
    { letter: 'პ', ordinal: 17, value: 80 },
    { letter: 'ჟ', ordinal: 18, value: 90 },
    { letter: 'რ', ordinal: 19, value: 100 },
    { letter: 'ს', ordinal: 20, value: 200 },
    { letter: 'ტ', ordinal: 21, value: 300 },
    { letter: 'ჳ(Ⴣ)', ordinal: 22, value: 400 },
    { letter: 'უ', ordinal: 22, value: 400 },
    { letter: 'ფ', ordinal: 23, value: 500 },
    { letter: 'ქ', ordinal: 24, value: 600 },
    { letter: 'ღ', ordinal: 25, value: 700 },
    { letter: 'ყ', ordinal: 26, value: 800 },
    { letter: 'შ', ordinal: 27, value: 900 },
    { letter: 'ჩ', ordinal: 28, value: 1000 },
    { letter: 'ც', ordinal: 29, value: 2000 },
    { letter: 'ძ', ordinal: 30, value: 3000 },
    { letter: 'წ', ordinal: 31, value: 4000 },
    { letter: 'ჭ', ordinal: 32, value: 5000 },
    { letter: 'ხ', ordinal: 33, value: 6000 },
    { letter: 'ჴ(Ⴤ)', ordinal: 34, value: 7000 },
    { letter: 'ჯ', ordinal: 35, value: 8000 },
    { letter: 'ჰ', ordinal: 36, value: 9000 },
    { letter: 'ჵ(Ⴥ)', ordinal: 37, value: 10000 }
];

// ასოების სწრაფი ძიებისთვის lookup ობიექტი
const letterLookup = {};
georgianAlphabet.forEach(item => {
    letterLookup[item.letter] = item;
});

// დოკუმენტის ჩატვირთვისას
document.addEventListener('DOMContentLoaded', function () {
    generateAlphabetDisplay();

    // ივენთ ლისენერები
    document.getElementById('word-input').addEventListener('input', debounce(calculateGematria, 300));
    document.getElementById('find-anagrams-btn').addEventListener('click', findAnagrams);
    document.getElementById('clear-btn').addEventListener('click', resetAll);

    // ფილტრის ღილაკების მართვა
    const filterButtons = document.querySelectorAll('.filter-btn');
    filterButtons.forEach(button => {
        button.addEventListener('click', function () {
            filterButtons.forEach(btn => btn.classList.remove('active'));
            this.classList.add('active');
            const filterType = this.getAttribute('data-filter');
            filterAnagrams(filterType);
        });
    });

    // ნავიგაციის აქტიური ლინკის გამოყოფა
    highlightActiveNavLink();
});

function highlightActiveNavLink() {
    const navLinks = document.querySelectorAll('.nav-menu a');
    const currentPath = window.location.pathname.split('/').pop() || 'index.html';
    navLinks.forEach(link => {
        link.classList.remove('active');
        const href = link.getAttribute('href');
        if (href === currentPath) {
            link.classList.add('active');
        }
    });
}

function generateAlphabetDisplay() {
    const alphabetGrid = document.getElementById('alphabet-grid');
    if (!alphabetGrid) return;

    const fragment = document.createDocumentFragment();

    for (let i = 0; i < georgianAlphabet.length; i++) {
        const letterBox = document.createElement('div');
        letterBox.className = 'letter-box';

        const ordinalElem = document.createElement('div');
        ordinalElem.className = 'letter-ordinal';
        ordinalElem.textContent = georgianAlphabet[i].ordinal;

        const letterElem = document.createElement('div');
        letterElem.className = 'letter';
        letterElem.textContent = georgianAlphabet[i].letter;

        const valueElem = document.createElement('div');
        valueElem.className = 'letter-value';
        valueElem.textContent = georgianAlphabet[i].value;

        letterBox.appendChild(ordinalElem);
        letterBox.appendChild(letterElem);
        letterBox.appendChild(valueElem);
        fragment.appendChild(letterBox);
    }

    alphabetGrid.appendChild(fragment);
}

function calculateGematria() {
    const input = document.getElementById('word-input').value;
    if (input.trim() === '') {
        resetResults();
        return;
    }

    let ordinalSum = 0;
    let numericalSum = 0;
    let hiddenSum = 0;

    const ordinalValues = [];
    const numericalValues = [];
    const hiddenValues = [];

    for (let i = 0; i < input.length; i++) {
        const char = input[i];
        const letterInfo = letterLookup[char];

        if (letterInfo) {
            const ordinal = letterInfo.ordinal;
            const numerical = letterInfo.value;
            const triangularValue = (ordinal * (ordinal + 1)) / 2;

            ordinalSum += ordinal;
            numericalSum += numerical;
            hiddenSum += triangularValue;

            ordinalValues.push(ordinal);
            numericalValues.push(numerical);
            hiddenValues.push(triangularValue);
        }
    }

    updateGematriaDisplay(
        input,
        ordinalSum,
        numericalSum,
        hiddenSum,
        reduceToSingleDigit(ordinalSum),
        reduceToSingleDigit(numericalSum),
        reduceToSingleDigit(hiddenSum),
        ordinalValues,
        numericalValues,
        hiddenValues
    );
}

function updateGematriaDisplay(
    word,
    ordinalSum,
    numericalSum,
    hiddenSum,
    ordinalReduction,
    numericalReduction,
    hiddenReduction,
    ordinalValues,
    numericalValues,
    hiddenValues
) {
    const updateElement = (id, value) => {
        const element = document.getElementById(id);
        if (element) element.textContent = value;
    };

    updateElement('ordinal-value', ordinalSum);
    updateElement('reduction-value', ordinalReduction);
    updateElement('reverse-value', numericalSum);
    updateElement('reverse-reduction-value', numericalReduction);
    updateElement('hidden-value', hiddenSum);
    updateElement('hidden-reduction-value', hiddenReduction);

    updateElement('ordinal-calculation', ordinalValues.join(' + ') + ' = ' + ordinalSum);
    updateElement('numeric-calculation', numericalValues.join(' + ') + ' = ' + numericalSum);
    updateElement('hidden-calculation', hiddenValues.join(' + ') + ' = ' + hiddenSum);
    updateElement('ordinal-reduction', ordinalReduction);
    updateElement('numeric-reduction', numericalReduction);
    updateElement('hidden-reduction', hiddenReduction);

    updateElement('input-word', word);
    updateElement('ordinal-breakdown', ordinalValues.join(' '));
}

function reduceToSingleDigit(num) {
    if (num < 10) return num;
    return 1 + ((num - 1) % 9);
}

function resetResults() {
    const elementsToReset = [
        'ordinal-value', 'reduction-value', 'reverse-value', 'reverse-reduction-value',
        'hidden-value', 'hidden-reduction-value', 'input-word', 'ordinal-breakdown',
        'ordinal-calculation', 'numeric-calculation', 'hidden-calculation',
        'ordinal-reduction', 'numeric-reduction', 'hidden-reduction'
    ];

    elementsToReset.forEach(id => {
        const element = document.getElementById(id);
        if (element) {
            element.textContent = id.includes('word') ? '' : '0';
        }
    });
}

function resetAll() {
    const inputElement = document.getElementById('word-input');
    if (inputElement) inputElement.value = '';
    resetResults();
    hideAnagramSection();
}

function sortWord(word) {
    return word.split('').sort().join('');
}

async function findAnagrams() {
    const input = document.getElementById('word-input').value.trim();
    if (!input) {
        alert('გთხოვთ შეიყვანოთ სიტყვა ანაგრამების მოსაძებნად.');
        return;
    }

    const anagramSection = document.getElementById('anagram-section');
    const anagramLoader = document.getElementById('anagram-loader');
    const anagramMessage = document.getElementById('anagram-message');
    const anagramTable = document.getElementById('anagram-table');
    const anagramResults = document.getElementById('anagram-results');

    if (!anagramSection || !anagramLoader || !anagramMessage || !anagramTable || !anagramResults) {
        console.error('ანაგრამების ელემენტები ვერ მოიძებნა');
        return;
    }

    anagramSection.style.display = 'block';
    anagramLoader.style.display = 'block';
    anagramMessage.textContent = 'ანაგრამების ძიება...';
    anagramMessage.classList.remove('success');
    anagramTable.style.display = 'none';
    anagramResults.innerHTML = '';

    try {
        const apiUrl = 'https://anagram-service.onrender.com/api/find-anagrams';
        console.log('მოთხოვნა იგზავნება:', apiUrl, 'სიტყვა:', input);

        const response = await fetch(apiUrl, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ word: input }),
            mode: 'cors'
        });

        console.log('მიღებულია პასუხი, სტატუსი:', response.status);

        if (!response.ok) {
            let errorText;
            try {
                const errorData = await response.json();
                errorText = errorData.error || 'სერვერის შეცდომა';
            } catch (e) {
                errorText = `სერვერის შეცდომა (${response.status})`;
            }
            throw new Error(errorText);
        }

        const data = await response.json();
        console.log('მიღებული მონაცემები:', data);

        anagramLoader.style.display = 'none';

        if (data.anagrams && data.anagrams.length > 0) {
            displayFoundAnagrams(data.anagrams, anagramResults);
            anagramTable.style.display = 'table';
            anagramMessage.textContent = 'ანაგრამები ნაპოვნია!';
            anagramMessage.classList.add('success');
        } else {
            anagramTable.style.display = 'table';
            anagramResults.innerHTML = '<tr><td colspan="2">ანაგრამები არ მოიძებნა</td></tr>';
            anagramMessage.textContent = 'ანაგრამები არ მოიძებნა';
            anagramMessage.classList.remove('success');
        }

        setTimeout(() => filterAnagrams('all'), 100);
    } catch (error) {
        console.error('ანაგრამების ძიებისას დაფიქსირდა შეცდომა:', error);
        anagramLoader.style.display = 'none';
        anagramResults.innerHTML = `<tr><td colspan="2">დაფიქსირდა შეცდომა: ${error.message}</td></tr>`;
        anagramTable.style.display = 'table';
        anagramMessage.textContent = 'შეცდომა ანაგრამების ძიებისას';
        anagramMessage.classList.remove('success');
    }
}

function displayFoundAnagrams(results, anagramResults) {
    if (!anagramResults) return;

    if (results.length === 0) {
        const row = document.createElement('tr');
        const cell = document.createElement('td');
        cell.colSpan = 2;
        cell.textContent = 'ანაგრამები არ მოიძებნა';
        row.appendChild(cell);
        anagramResults.appendChild(row);
        return;
    }

    const fragment = document.createDocumentFragment();

    results.forEach(result => {
        const row = document.createElement('tr');
        row.dataset.type = result.type;

        const wordCell = document.createElement('td');
        wordCell.textContent = result.word;

        const typeCell = document.createElement('td');
        typeCell.textContent = result.type === 'exact'
            ? 'შეყვანილი სიტყვის ზუსტი ანაგრამა'
            : 'სიტყვის დასაწყისი ემთხვევა ანაგრამას';

        row.appendChild(wordCell);
        row.appendChild(typeCell);
        fragment.appendChild(row);
    });

    anagramResults.appendChild(fragment);
}

function filterAnagrams(filterType) {
    const rows = document.querySelectorAll('#anagram-results tr');
    let visibleCount = 0;

    rows.forEach(row => {
        const rowType = row.dataset.type;
        if (filterType === 'all' || filterType === rowType) {
            row.classList.remove('hidden');
            visibleCount++;
        } else {
            row.classList.add('hidden');
        }
    });

    const message = document.getElementById('anagram-message');
    if (!message) return;

    if (visibleCount === 0) {
        message.textContent = 'არჩეული ფილტრით ანაგრამები არ მოიძებნა';
        message.classList.remove('success');
    } else {
        message.textContent = 'ანაგრამები ნაპოვნია!';
        message.classList.add('success');
    }
}

function hideAnagramSection() {
    const anagramSection = document.getElementById('anagram-section');
    if (anagramSection) anagramSection.style.display = 'none';
}

function debounce(func, wait) {
    let timeout;
    return function() {
        const context = this;
        const args = arguments;
        clearTimeout(timeout);
        timeout = setTimeout(() => {
            func.apply(context, args);
        }, wait);
    };
}
    </script>
</body>
</html>
